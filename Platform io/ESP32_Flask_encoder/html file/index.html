<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DRO Interface</title>
<style>
  #indicator {
    font-size: 12px;
    margin-left: 10px;
  }
  
  h1 {
    text-align: center;
  }
  body {
    font-family: Arial, sans-serif;
    background: #f0f0f0;
  }
  .dro-container {
    width: 600px;
    margin: 0 auto;
    background: #ddd;
    padding: 20px;
    border-radius: 10px;
  }
  .readout {
    font-family: 'Digital', sans-serif;
    background: #000;
    color: #00ff00;
    padding: 10px;
    margin-bottom: 5px;
  }
  .calculator-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 20px;
  }
  .calculator-button {
    padding: 20px;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 5px;
    text-align: center;
    cursor: pointer;
  }
  .calculator-button:hover {
    background: #e9e9e9;
  }
  /* More styles can be added as per requirement */
</style>
</head>
<body>
<h1>491 ESP32 DRO Boyyz</h1>
</hr>
<div class="dro-container">
  <div class="readout" id="x-readout">MODE: ABS</div>
  <div class="readout" id="x-readout">X: <span id="position"></span></div>
  <div class="readout" id="y-readout">Y: <span id="position2"></span></div>
  <div class="readout" id="z-readout">Z: <span id="position3"></span></div>
</div>

<div class="dro-container">
  <!-- This is for selecting an Axis and for Zeroing out an axis -->
  <p>Zero out / Select Buttons</p>
  <button onclick="resetPosition('x')">Xo</button>
  <button onclick="resetPosition('y')">Yo</button>
  <button onclick="resetPosition('z')">Zo</button>
  <button onclick="resetPosition('select_x')">Select X</button>
  <button onclick="resetPosition('select_y')">Select Y</button>
  <button onclick="resetPosition('select_z')">Select Z</button>
</div>


<!-- NOTE Mahdi this is how I made the grid, note how I used class ="calculator-grid", I set the grid style -->
<div class="dro-container">
  <p>Calculator Buttons</p>
  <div class ="calculator-grid"> 
    <button>1/2</button>
    <button id="toggleButton" onclick="toggleUnits()">INCH/MM</button>
    <span id="indicator">(INCH)</span>
    <button>9</button>
    <button>8</button>
    <button>7</button>
    <button>6</button>
    <button>5</button>
    <button>4</button>
    <button>3</button>
    <button>2</button>
    <button>1</button>
    <button>.</button>
    <button>0</button>
    <button>+/-</button>
  </div>
</div>

<div class="dro-container">
  <!-- These need to be Implemented still, Randy I created the button dor ABS/INC juyt join the logic using the 2 buttons I already made or whatever is easier for you!-->
  <p>Zero all out / ABS/INC mode / Calculate / Enter Buttons</p>
  <button>ABS/INC</button>
  <button>XYZo</button>
  <button>CA</button>
  <button>ENT</button>
  <button onclick="resetPosition('xInc')">Abs X</button>
  <button onclick="resetPosition('xAbs')"> Inc</button>
</div>

<div class="dro-container">
  <!-- This is for our function key layout-->
  <p>Function Buttons</p>
  <button>F1</button>
  <button>F2</button>
  <button>F3</button>
  <button>F4</button>
  <button>F5</button>
  <button>F6</button>
</div>

<div class="dro-container">
  <!-- This is for the GRID buttons-->
  <p>Grid Buttons</p>
  <button>option1</button>
  <button>option2</button>
  <button>option3</buton>
  <button>option4</button>
</div>

<div class="dro-container">
  <!-- Arrow Keys-->
  <p>Arrow Buttons</p>
  <button>↑</button>
  <button>→</button>
  <button>↓</buton>
  <button>←</button>
</div>


<script>
    var isInchMode= true;

  function toggleUnits() {
    var button = document.getElementById("toggleButton");
    var indicator = document.getElementById("indicator");
    //measurement

    if (isInchMode) {
      button.innerHTML = "MM";
      indicator.innerHTML = "(MM)";
      //measurement
      isInchMode = false;
    }
    else {
      button.innerHTML = "INCH";
      indicator.innerHTML = "(INCH)";
      //measurement.innerHTML = "0 inches";
      isInchMode = true;
    }
  } 

  function updatePositions() {
    fetch("/position")
      .then(response => response.text())
      .then(data => document.getElementById("position").innerText = data)
      .catch(console.error);

    fetch("/position2")
      .then(response => response.text())
      .then(data => document.getElementById("position2").innerText = data)
      .catch(console.error);

    fetch("/position3")
      .then(response => response.text())
      .then(data => document.getElementById("position3").innerText = data)
      .catch(console.error);
  }

  function resetPosition(axis) {
  fetch("/reset/" + axis)
    .then(response => {
      if (response.ok) {
        console.log(axis.toUpperCase() + " position reset"); // print message 
        updatePositions(); // Refresh the positions immediately
      }
    })
    .catch(console.error);
}

//   function togglePosition(position) {
//   fetch("/switch/" + position)
//     .then(response => {
//       if (response.ok) {
//         console.log(axis.toUpperCase() + " position reset"); // print message 
//         updatePositions(); // Refresh the positions immediately
//       }
//     })
//     .catch(console.error);
// }



  setInterval(updatePositions, 50);   // Call updatePositions() every 1000ms (1 second) but right now it is 50ms so stupid fast 
</script>
</body>
</html>
